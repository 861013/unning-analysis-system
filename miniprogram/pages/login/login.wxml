<!--pages/login/login.wxml-->
<view class="container">
  <view class="login-box">
    <view class="title">{{showRegister ? '注册' : '登录'}}</view>

    <view class="login-type" wx:if="{{!showRegister}}">
      <view class="type-item {{loginType === 'phone' ? 'active' : ''}}" 
            bindtap="switchLoginType" data-type="phone">手机号</view>
      <view class="type-item {{loginType === 'email' ? 'active' : ''}}" 
            bindtap="switchLoginType" data-type="email">邮箱</view>
      <view class="type-item {{loginType === 'wechat' ? 'active' : ''}}" 
            bindtap="switchLoginType" data-type="wechat">微信</view>
    </view>

    <view class="form" wx:if="{{!showRegister}}">
      <input wx:if="{{loginType === 'phone'}}" 
             class="input" 
             placeholder="请输入手机号" 
             type="number"
             value="{{phone}}"
             bindinput="onPhoneInput" />
      
      <input wx:if="{{loginType === 'email'}}" 
             class="input" 
             placeholder="请输入邮箱" 
             type="text"
             value="{{email}}"
             bindinput="onEmailInput" />
      
      <input wx:if="{{loginType !== 'wechat'}}" 
             class="input" 
             placeholder="请输入密码" 
             password
             value="{{password}}"
             bindinput="onPasswordInput" />
      
      <button class="btn-primary" bindtap="handleLogin">登录</button>
    </view>

    <view class="form" wx:if="{{showRegister}}">
      <input class="input" placeholder="昵称" value="{{registerData.username}}" />
      <input class="input" placeholder="手机号（可选）" type="number" value="{{registerData.phone}}" />
      <input class="input" placeholder="邮箱（可选）" type="text" value="{{registerData.email}}" />
      <input class="input" placeholder="密码（至少6位）" password value="{{registerData.password}}" />
      <button class="btn-primary" bindtap="handleRegister">注册</button>
    </view>

    <view class="footer">
      <text bindtap="toggleRegister">{{showRegister ? '已有账号？去登录' : '没有账号？去注册'}}</text>
    </view>
  </view>
</view>

